sudo: required
dist: trusty
language: cpp
cache: ccache

branches:
  only:
    - master

matrix:
  fast_finish: true
  include:
    - stage: "macOS"
      os: osx
      osx_image: xcode10.1
      env: JOB=macOS

script: "./.travis/$JOB.sh"

deploy:
  - provider: releases
    file: "./Traktor.dmg"
    on:
      condition: $TRAVIS_OS_NAME == osx
      repo: servmask/Qtraktor
    skip_cleanup: true
